@target(default=True)
def build(prefix="/usr/local"):
    print("Bulding (prefix={0})".format(prefix))

@target(requires=build)
def test():
    print("Testing")

@target(requires=build, help="Install me!")
def install(dest_dir="/"):
    print("Installing (dest_dir={0})".format(dest_dir))

@target
def clean():
    print("Cleaning")

@target(name="run", requires=(clean, build, clean), help="Run with it")
def run_(trouble=False):
    print("Running (trouble={0})".format(trouble))

    if trouble:
        raise Exception("Trouble")

@target(help="Print messages to the console",
        args=[Argument("message", help="The message to print"),
              Argument("count", help="Print the message COUNT times")])
def echo(message, count=1, extra=None):
    print("Echoing (message={0}, count={1})".format(message, count))

    for i in range(count):
       print(message)
