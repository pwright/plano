set_default_target("build", "/tmp/alpha") # prefix="/tmp/alpha")

@target
def build(prefix="/usr/local"):
    print("Building (prefix={0})".format(prefix))

@target
def test():
    build()
    print("Testing")

@target(help="Install me!")
def install(staging_dir="/"):
    build()
    print("Installing (dest_dir={0})".format(staging_dir))

@target
def clean():
    print("Cleaning")

@target(name="run", help="Run with it")
def run_(trouble=False):
    clean()
    clean()
    build()

    print("Running (trouble={0})".format(trouble))

    if trouble:
        raise Exception("Trouble")

@target(help="Print messages to the console",
        args=[TargetArgument("message", help="The message to print"),
              TargetArgument("count", help="Print the message COUNT times"),
              TargetArgument("extra", default=1)])
def echo(message, count=1, extra=None):
    print("Echoing (message={0}, count={1})".format(message, count))

    for i in range(count):
       print(message)
