set_default_command("build", prefix="/tmp/alpha")

@command
def build(prefix="/usr/local"):
    print("Building (prefix={0})".format(prefix))

@command
def test():
    build()
    print("Testing")

@command(help="Install me!")
def install(staging_dir="/"):
    build()
    print("Installing (dest_dir={0})".format(staging_dir))

@command
def clean():
    print("Cleaning")

@command(name="run", help="Run with it")
def run_(trouble=False):
    clean()
    clean()
    build()

    print("Running (trouble={0})".format(trouble))

    if trouble:
        raise Exception("Trouble")

@command(help="Print messages to the console",
         args=(CommandArgument("mess_age", help="The message to print", display_name="message"),
               CommandArgument("count", help="Print the message COUNT times"),
               CommandArgument("extra", default=1)))
def echo(mess_age, count=1, extra=None):
    print("Echoing (message={0}, count={1})".format(mess_age, count))

    for i in range(count):
       print(mess_age)
