import bullseye

if not bullseye.PlanoCommand._commands:
    if PYTHON2:
        reload(bullseye)
    else:
        import importlib
        importlib.reload(bullseye)

from bullseye import *

project.name = "chucker"
project.extra_source_dirs = ["files"]
project.build_deps = ["flipper"]
project.test_modules = ["chucker_tests"]

_result_file = "build/result.json"

@command(extends=build)
def build():
    data = {"built": True}
    write_json(_result_file, data)

@command(extends=test)
def test():
    if exists(_result_file):
        data = read_json(_result_file)
        data["tested"] = True
        write_json(_result_file, data)

@command(extends=install)
def install():
    data = read_json(_result_file)
    data["installed"] = True
    write_json(_result_file, data)
